<div class="card">
<div><h4>Programaciones</h4></div>
</div>
        <!--TABLA PROGRAMACION MAESTRO-->
        <div class="card-block" style="padding:3">
            <div class="card-title">
                    <input placeholder="Buscar..." type="text" id="gb1" #filtroGlobal/>
                    <!--boton nuevo-->
                    <span class="text-xs-right">
                        <button type="text" (click)="NuevaProgCabecera()" pButton  label="Nuevo"></button>
                    </span>
                    <!--TABLA PROGRAMACION MAESTRO-->
                    <div class="card-text">
                        <p-dataTable [value]="programacionMaestroArrayHTML" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,15,20]" [globalFilter]="filtroGlobal"
                            scrollable="true" scrollWidth="100%" selectionMode="single" [(selection)]="selectedProgPresentar" (onRowSelect)="onRowSelectMaestro($event)">
                            <!--botones para la PRIMERA COLUMNA -->
                            <p-column styleClass="col-button" [style]="{'width':'4em'}">
                                <!--<template pTempalte="header">
                                    <button type="button" pButton icon="fa-refresh">  </button>
                                </template>-->
                                <template let-col let-progrRowMaestro="rowData" pTemplate="body">
                                    <button type="button" pButton class="btn" (click)="editarCabecera(progrRowMaestro)" icon="fa-pencil-square-o" ></button>
                                    <button type="button" pButton class="btn" (click)="eliminarRegistroGrilla(progrRowMaestro.prId)" icon="fa-trash" ></button>
                                </template>
                            </p-column>

                            <!--campos de la datatable-->
                            <p-column field="nro" header="N°"  [style]="{'width':'4em','text-align':'center'}"></p-column>
                            <p-column field="tipo" header="Tipo"  [style]="{'width':'8em','text-align':'center'}"></p-column>
                            <p-column field="prDescripcion" header="Nombre"  [style]="{'width':'14em','text-align':'center'}"></p-column>
                            <p-column field="PrCantidadBuses" header="Cant."  [style]="{'width':'4em','text-align':'center'}"></p-column>
                            <p-column field="PrFechaInicio" header="Desde" [style]="{'width':'8em','text-align':'center'}"></p-column>
                            <p-column field="PrFechaFin" header="Hasta" [style]="{'width':'8em','text-align':'center'}"></p-column>
                            <p-column field="dias" header="Dias"  [style]="{'width':'4em','text-align':'center'}"></p-column>
                        </p-dataTable>
                    </div><!--fin tabla PROGRAMACION MAESTRO-->
            </div>
        </div>
        
         <!--modal boton nuevo (PROGRAMACION 1ERA VENTANA)-->
        <p-dialog  [(visible)]="displayNuevaProgramacion" 
                    modal="modal" width="100%" responsive="true" [closable]="false">
                    <p-header>
                        {{titleNuevoProgPrimerModal }} Programacion
                    </p-header>
                        <!--tipo de programcion MANUAL O AUTOMATICO-->
                    <div class="form-group row">
                        <div class="col-4"><label >Tipo:</label></div>
                        <div class="col-8">
                            <select class="form-control" [(ngModel)]="tipoProg" (change)="tipoProgramacion($event)">
                                <option *ngFor="let tipo of _tipoProg" [ngValue]="tipo.id">
                                    {{tipo.nTipo}}
                                </option>
                            </select>
                        </div>
                    </div>

                    <!--forma de programacion por tiempo y cantidad de buses (Escala o Pescadito)-->
                    <div class="form-group row">
                        <div class="col-4"><label >Forma:</label></div>
                        <div class="col-8">
                            <select class="form-control" [(ngModel)]="formaProg" (change)="formaProgramacion($event)">
                                <option *ngFor="let forma of _formaProg" [ngValue]="forma.id">
                                    {{forma.nForma}}
                                </option>
                            </select>
                        </div>
                    </div>

                    <!--fechas -->
                    <div class="form-group row">
                        <div class="form-group">
                            <label class="control-label" for="date1">De:</label>
                            <input class="form-control" id="date1" name="finicio" placeholder="MM/DD/YYY" type="date" [(ngModel)]="progMaestro.PrFechaInicio" />
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="date2">Hasta:</label>
                            <input class="form-control" id="date2" name="ffinal" placeholder="MM/DD/YYY" type="date"  [(ngModel)]="progMaestro.PrFechaFin"/>
                        </div>
                    </div>

                    <!--cantidad de buses-->
                    <div class="form-group">
                        <label for="nrobuses" class="control-label">Buses:____Activos:{{bAct}}_ No Activos: {{bNAct}}</label>
                        <!--<input class="form-control" type="number" [(ngModel)]="progMaestro.PrCantidadBuses" id="nrobuses">-->
                    </div>

                    <!--Descripcion  -->
                    <div class="form-group">
                        <label for="descripcion" class="control-label">Identificador:</label>
                        <input class="form-control" type="text" id="descripcion"[(ngModel)]="progMaestro.PrDescripcion" >
                    </div>
                    <!--modal footer-->
                    <p-footer>
                        <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                            <button type="text" pButton icon="fa-check" (click)="showProgBase()" label="Continuar"></button>
                            <button type="text" pButton icon="fa-close" (click)="cancelNewProgramacion()" label="Cancelar"></button>
                        </div>
                    </p-footer>
        </p-dialog> 
        <!--FIN BOTON NUEVO MODAL-->

        <!--modal del boton guardar (2DA VENTANA  TERMINAR GENERANDO LA PROGRAMACION) -->
        <p-dialog header="Programacion Base"  [(visible)]="displayProgramacionBase" 
                    modal="modal" width="450" responsive="true" [closable]="false" >           
                    <!--lista de placas (programacion base) MANUAL -->
                    <p-pickList [source]="arrayPlacas" [target]="ordenSorteo" sourceHeader="Placa" 
                                targetHeader="Orden" [responsive]="false" [sourceStyle]="{'height':'130px','width':'100px'}" 
                                [targetStyle]="{'height':'130px','width':'100px'}">
                        <template let-placa pTemplate="item">
                            <div class="ui-helper-clearfix">
                                <div style="font-size:12px; float:right; margin:5px 5px 0 0">
                                    {{placa.nroPlaca}}
                                </div>
                            </div>
                        </template>
                    </p-pickList>
                               
                    <p-footer>
                        <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                            <button type="button" pButton icon="fa-close" (click)="cancelarProgBaseSegundoModal()" [disabled]="disabledButtonForm()" label="Cancelar"></button>
                            <button type="button" pButton icon="fa-check" (click)="generarProgramacionSegundoModal()" label="Generar Programacion"></button>
                        </div>
                    </p-footer>
        </p-dialog> <!--fin boton modal guardar-->

        <!--MODAL TABLA PROGRAMACION-->
        <!--
        <p-dialog header="Programacion" [(visible)]="displayProgramacion" modal="modal" 
            width="320"  [closable]="false" resizable="true" *ngIf="nroColumn<=5">
            <div class="container "> 
                  
                        <div class="table-container" > 
                            <div class="container" style="overflow-x:auto;">
                                <table *ngIf="nroColumn>30" width="2800px">        
                                    <thead>
                                        <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                    </thead>
                                    
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table *ngIf="30>=nroColumn && nroColumn>20" width="1500px">
                                    
                                    <thead>
                                        <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                    </thead>
                                    
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table *ngIf="20>=nroColumn && nroColumn>10" width="1000px"> 
                                    <thead>  <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>  </thead>
                                    <h1>damian</h1>    
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table *ngIf="10>=nroColumn && nroColumn>5" width="750px">
                                    <h1>damian</h1> 
                                    <thead>    <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>    </thead>
                                    
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table *ngIf="5>=nroColumn && nroColumn>0" width="550px">
                                    <thead>
                                        <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                    </thead>
                                    <h1>damian</h1>                                  
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                <footer class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <button type="button" pButton (click)="cerrarProg()"   label="Cerrar"></button>
                        <button type="button" pButton (click)="imprimirProg()" label="Imprimir"></button>
                </footer>
            </div>
        </p-dialog>
        -->

        <!--MODAL PROGRAMACIONES-->
        
        <p-dialog header="Programacion" [(visible)]="displayProgramacion" modal="modal" 
            width="500"  [closable]="false" resizable="true" *ngIf="nroColumn>=5">
            <div class="container "> 
                
                    <div class="table-container" > 
                        <div class="container" style="overflow-x:auto;">
                            <!--AUMENTAR MAS TAMAÑOS DE TABLAS COMO MAXIMO HASTA 63 DIAS DE PROGRAMACION DE DOS MESES-->
                            <table *ngIf="nroColumn>=30" width="3500px">
                                
                                <thead>
                                    <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                </thead>
                                
                                <tbody>
                                    <tr *ngFor="let c of _detalle">
                                        <td *ngFor="let placa of c">{{placa}}</td>
                                    </tr>
                                </tbody>
                            </table>

                            <table *ngIf="30>nroColumn && nroColumn>=20" width="2000px">   
                                <thead>
                                    <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let c of _detalle">
                                        <td *ngFor="let placa of c">{{placa}}</td>
                                    </tr>
                                </tbody>
                            </table>

                            <table *ngIf="20>nroColumn && nroColumn>10" width="1500px">
                                
                                <thead>
                                    <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                </thead>
                                
                                <tbody>
                                    <tr *ngFor="let c of _detalle">
                                        <td *ngFor="let placa of c">{{placa}}</td>
                                    </tr>
                                </tbody>
                            </table>

                            <table *ngIf="10>=nroColumn && nroColumn>5" width="750px">
                                
                                <thead>
                                    <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                </thead>
                                
                                <tbody>
                                    <tr *ngFor="let c of _detalle">
                                        <td *ngFor="let placa of c">{{placa}}</td>
                                    </tr>
                                </tbody>
                            </table>

                            <table *ngIf="5>=nroColumn && nroColumn>0" width="500px">
                                <thead>
                                    <tr><th *ngFor="let dia of this.nroDias;">{{dia}}</th></tr>
                                </thead>                                  
                                <tbody>
                                    <tr *ngFor="let c of _detalle">
                                        <td *ngFor="let placa of c">{{placa}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                <footer >
                    <button type="button" pButton (click)="cerrarProg()"   label="Cerrar"></button>
                    <button type="button" pButton (click)="descargarProgramacion()" label="Descargar"></button>
                </footer>
            </div>
        </p-dialog>
        

        <!--MODAL CONFIRMAR ELIMINAR REGISTRO-->
        <p-dialog [(visible)]="displayConfirmar" modal="modal" width="100%" responsive="true" [closable]="false">
                <p>{{mensaje}}</p>
                <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                     <button type="button" pButton (click)="displayConfirmar=false"   label="Cancelar"></button>
                     <button type="button" pButton (click)="borrarRegistro()" label="Aceptar"></button>
                </p-footer>
        </p-dialog>

        <!--MODAL ACEPTAR NUEVA PROGRAMACION (CONFIRMAR)-->
        <p-dialog [(visible)]="displayAceptarProgNueva" modal="modal" width="100%" responsive="true" [closable]="false">
                <p>{{mensaje}}</p>
                <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                     <button type="button" pButton (click)="aceptarNuevaProg()" label="Aceptar"></button>
                </p-footer>
        </p-dialog>

        <!--ERROR AL INGRESAR DATOS 1ERA VENTANA MODAL-->
        <p-dialog [(visible)]="displayErrorDatos" modal="modal" width="100%" responsive="true" [closable]="false">
                <p>{{mensaje}}</p>
                <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                     <button type="button" pButton (click)="errorDatos()" label="Aceptar"></button>
                </p-footer>
        </p-dialog>

        <!--ERROR EN LA TABLA DE PROGRAMACION, VENTANA MODAL-->
        <p-dialog [(visible)]="displayErrorTablaProgramacion" modal="modal" width="100%" responsive="true" [closable]="false">
                <p>{{mensaje}}</p>
                <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                     <button type="button" pButton (click)="errorTablaProgramacion()" label="Aceptar"></button>
                </p-footer>
        </p-dialog>

        <!--ERROR FALTAN PLACAS EN EL SORTEO, VENTANA MODAL-->
        <p-dialog [(visible)]="displayFaltanPlacas" modal="modal" width="100%" responsive="true" [closable]="false">
                <p>{{mensaje}}</p>
                <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                     <button type="button" pButton (click)="faltanPlacas()" label="Aceptar"></button>
                </p-footer>
        </p-dialog>

        <!--MENSAJE SE ACABA DE DESCARGAR LA PROGRAMACION, VENTANA MODAL-->
        <p-dialog [(visible)]="displayDescargaProg" modal="modal" width="100%" responsive="true" [closable]="false">
                <p>{{mensaje}}</p>
                <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                     <button type="button" pButton (click)="descargaProg()" label="Aceptar"></button>
                </p-footer>
        </p-dialog>
      

  <!--MODAL VALIDAR DATOS-->
        <!--
            <p-dialog [(visible)]="displayConfirmar" modal="modal" width="100%" responsive="true">
                    <p>{{mensaje}}</p>
                    <p-footer class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                        <button type="button" pButton (click)="displayConfirmar=false"   label="No"></button>
                        <button type="button" pButton (click)="borrarRegistro()" label="Si"></button>
                    </p-footer>
            </p-dialog>
        -->
        <!--
          <tr>
                <th>Month</th>
                <th>Savings</th>  class="col-xs-4 col-sm-4 col-md-4 col-lg-4"
            </tr>
            <tr>
                <td>January</td>
                <td>$100</td>
            </tr>
            <tr>
                <td>February</td>
                <td>$50</td>
            </tr>
        -->



