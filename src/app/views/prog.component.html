<!--PRINCIPAL TABLAS-->
<div class="contenedor">

    <!--TABLA PROGRAMACION BASE-->
        <label>Tabla Programaciones</label>

        <div class="row">
            <div class="col-xl-2 col-md-2 col-sm-6 col-xs-12">
                <div class="form-group"><input class="form-control" placeholder="Buscar..." type="text" id="gb1" #filtroGlobal/></div>
            </div>
            <div class="col-xl-2 col-md-2 col-sm-6 col-xs-12">
                <div class="form-group"><button class="form-control" class="btn_modal" 
                icon="fa-file-text-o" (click)="funcBtnNewProgmBase()" pButton  label="Apertura Base"></button></div>
            </div>
        </div>

        <div class="row">
            <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">        
                <div class="table table-responsive">
                    <p-dataTable [value]="arrAllProgBase" [globalFilter]="filtroGlobal" [rows]="5" [paginator]="true" 
                                dataKey="nro" selectionMode="single" emptyMessage="Lista vacia" (onRowSelect)="onRowSelArrAllProgBase($event)"> 
                                <!--onRowSelectMaestro - aqui estaba la parte para ver la tabla de programcion-->
                        <p-column styleClass="col-button" [style]="{'width':'3em'}">
                            <template let-col let-progrRowMaestro="rowData" pTemplate="body">
                                <!--<button type="button" pButton id="btnTable" (click)="editarCabecera(progrRowMaestro)" icon="fa-pencil-square-o" ></button>-->
                                <button type="button" pButton id="btnTable" (click)="funcBtnDTProgm(progrRowMaestro.PrBaId)" icon="fa-trash" ></button>
                            </template>
                        </p-column> 
                        <p-column field="Nro" header="N°"  [style]="{'width':'4em','text-align':'center'}"></p-column>
                        <p-column field="PrBaDescripcion" header="Descripcion"  [style]="{'width':'10em'}"></p-column>
                        
                        <p-column field="_PrBaFechaInicio" header="Desde" [style]="{'width':'8em','text-align':'center'}"></p-column>
                        <p-column field="_PrBaFechaFin" header="Hasta" [style]="{'width':'8em','text-align':'center'}"></p-column>
                        <p-column field="dias" header="N° Dias"  [style]="{'width':'4em','text-align':'center'}"></p-column>
                        <!--<p-column field="PrDiasIncluidosString" header="Dias Incluidos"  [style]="{'width':'10em','text-align':'center'}"></p-column>-->
                        <p-column field="_PrDiasIncluidos" header="Dias Incluidos"  [style]="{'width':'10em','text-align':'center'}"></p-column>
                        <p-column field="EmConsorcio" header="Sub-Empresa"  [style]="{'width':'10em'}"></p-column>
                    </p-dataTable>
                </div>
            </div>
        </div>

    <!--TABLA PROGRAMACION DETALLE-->
        <div class="row">
            <div class="col-xl-2 col-md-2 col-sm-6 col-xs-12">
                <div class="form-group"> <input class="form-control" placeholder="Buscar..." type="text" id="gb1" #filtroGlobal/> </div>
            </div>
            <div class="col-xl-2 col-md-2 col-sm-6 col-xs-12">
                <div class="form-group"> <button class="form-control" class="btn_modal" icon="fa-file-text-o" 
                   [disabled]="PrBaId==0" (click)="funcBtnNewSubProgm()" pButton  label="Nueva Programacion" ></button> </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                    <div id="validation">{{progValida}}</div>
                <div class="table table-responsive">
                    <p-dataTable [value]="arrAllProgmByPrBa" [globalFilter]="filtroGlobal" [rows]="5" [paginator]="true" 
                                dataKey="nro" selectionMode="single" emptyMessage="Lista vacia" (onRowSelect)="onRowSelProgram($event)"> 

                        <p-column styleClass="col-button" [style]="{'width':'3em'}">
                            <template let-col let-progrRow="rowData" pTemplate="body">
                                <!--
                                    <button type="button" pButton id="btnTable" (click)="editarCabecera(progrRowMaestro)" icon="fa-pencil-square-o" ></button>
                                    (click)="eliminarRegistroGrilla(progrRowMaestro.prId)"
                                -->
                                <button type="button" pButton id="btnTable" (click)="dtDelRegProgram(progrRow.PrId)" icon="fa-trash" ></button>
                            </template>
                        </p-column> 
                        <p-column field="Nro" header="N°"  [style]="{'width':'4em','text-align':'center'}"></p-column>
                        <p-column field="PrCantidadBuses" header="N° MBuses"  [style]="{'width':'4em','text-align':'center'}"></p-column>           
                        <p-column field="SuEmRSocial" header="Empresa"  [style]="{'width':'10em'}"></p-column>
                        <p-column field="_PrTipo" header="Forma"  [style]="{'width':'6em','text-align':'center'}"></p-column>
                        <p-column field="_PrAleatorio" header="Sorteo"  [style]="{'width':'6em','text-align':'center'}"></p-column>
                    </p-dataTable>
                </div>
            </div>
        </div>

</div>

<!--VENTANAS FORMULARIOS-->
    <!--PROGRMAACION BASE-->
        <!--1er formulario 
            se inicia la creacion de una nueva programacion
            nueva programacion base -->
        <p-dialog [(visible)]="displayNewProgmBase" modal="modal" width="100%" height="100%" 
                    responsive="true" [resizable]="false" [closable]="false">
            <p-header> Apertura Nueva Programacion</p-header>
                <div class="contFormProgBase">
                    <div class="bodyFormProgBase">
                        <div class="row">                                                          
                            <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <!--<label  class="control-label">Descripcion:</label>-->
                                    <input class="form-control" type="text" 
                                            [(ngModel)]="PrBaDescripcion" 
                                            maxlength="30" placeholder="descripcion"
                                            required #valPrBaDes="ngModel" />
                                    <span *ngIf="!valPrBaDes.valid && valPrBaDes.touched"  >   
                                        <div id="validation" [hidden]="!valPrBaDes.errors.required"> Obligatorio </div>
                                    </span>
                                </div>
                            </div>
                            <div class="col-xl-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label  class="control-label">Del:</label>
                                    <input class="form-control" name="finicio"  type="date" 
                                            [(ngModel)]="PrBaFechaInicio" 
                    
                                            required #fde="ngModel" />
                                    <span *ngIf="!fde.valid && fde.touched"  >   
                                        <div id="validation" [hidden]="!fde.errors.required"> Obligatorio </div>
                                    </span>
                                </div>
                            </div>
                            <div class="col-xl-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label  class="control-label" >Hasta:</label>
                                    <input class="form-control" name="ffinal"  type="date" 
                                            [(ngModel)]="PrBaFechaFin"  required #fha="ngModel" />
                                    <span *ngIf="!fha.valid && fha.touched"  >  
                                        <div id="validation" [hidden]="!fha.errors.required"> Obligatorio </div>
                                    </span>
                                </div>
                            </div>
                        </div>
                            
                        <!--<label>Dias de la Semana</label>-->
                        <p-dataTable [value]="diasSemana" [(selection)]="dtSelectDias" [scrollable]="true" scrollHeight="120px">
                            <p-column [style]="{'width':'2em','text-align':'center'}" selectionMode="multiple"></p-column>
                            <p-column [style]="{'width':'2em','text-align':'center'}" field="nro" header="N°"></p-column>
                            <p-column [style]="{'width':'4em'}" field="nomb" header="Dia"></p-column>
                        </p-dataTable>     
                        <label>Dias considerados: {{dtSelectDias.length}}</label>  
                        
                    </div>
                    

                    <div class="pieFormProgBase">                
                        <div class="row justify-content-end">
                            <div class="col-xl-4 col-md-4 col-sm-6 col-xs-12">
                                <button class="btn_modal" type="text" pButton
                                (click)="funcFormOneNextProgBase();" icon="fa-step-forward"
                                label="Continuar" 
                                [disabled]="false"></button>
                                <!--!(bAct>0 && bAct!=0) || !tprog.valid || !fprog.valid || !fde.valid || !fha.valid || !descrip.valid || !(dtSelectDias.length>4 && dtSelectDias.length<8)-->
                            </div>
                            <div class="col-xl-4 col-md-4 col-sm-6 col-xs-12">
                                <button class="btn_modal" type="text" pButton icon="fa-close"
                                (click)="funcFormOneCancelProgBase(); " label="Cancelar"></button>
                                <!--tprog.reset(); fprog.reset(); fde.reset(); fha.reset(); descrip.reset();-->
                            </div>
                        </div>            
                    </div>
                </div>
        </p-dialog>

        <!--2do formulario
            se ingresa hace el ingreso de las horas base de salidas    
        -->
        <p-dialog [resizable]="false" [(visible)]="displayFormHorasBase" modal="modal" 
                width="100%" responsive="true" [closable]="false" >
                <p-header>Hora Inicio{{nroMiniBusHeader+1}} de {{nroTotalMinibuses}} : {{placaEditarCelda}}</p-header>
                <div class="contFormHoraBase">
                    <div class="bodyFormHoraBase">
                    
                        <div class="row">
                            <div class="col-xl-4 col-md-4 col-sm-12 col-xs-12">
                                <div class="form-group">             
                                    <label>Hora Salida:</label>                  
                                    <input type="text"
                                            class="form-control" 
                                            [(ngModel)]="horaBase" 
                                            #hBase="ngModel" required placeholder="hh:mm:ss"
                                            pattern="([0-1]{1}[0-9]{1}|20|21|22|23):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})" 
                                            >

                                    <div id="validation" [hidden]="!hBase.touched || hBase.valid ">
                                        Error en los datos
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-md-4 col-sm-12 col-xs-12">
                                <div class="form-group">               
                                    <label>Incremento:</label>                  
                                    <input type="text" 
                                            class="form-control" 
                                            [(ngModel)]="horaIncremento" 
                                            #hIncremento="ngModel" required placeholder="hh:mm:ss"
                                            pattern="([0-1]{1}[0-9]{1}|20|21|22|23):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})" 
                                            >
                                
                                    <div id="validation" [hidden]="!hIncremento.touched || hIncremento.valid ">
                                        Error en los datos
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-md-4 col-sm-12 col-xs-12">
                                <div class="form-group">                            
                                    <!---->
                                    <br>
                                    <button class="btn_modal" type="text" pButton icon="fa-check" 
                                    (click)="AgregarHBase(hBase.valid, hIncremento.valid);" 
                                    [disabled]="(!hBase.valid || !hIncremento.valid) || nroMiniBus==nroTotalMinibuses"                    
                                    label="Agregar" ></button>                                    
                                </div>
                            </div>
                        </div>
                                                                        
                        <p-dataTable [value]="ordenSorteo" [editable]="true"
                                    (onEditComplete)="onEditCompleteHB($event)"
                                    (onEditCancel)="onEditCancelHB($event)"
                                    (onEditInit)="onEditInitHB($event)"
                                    scrollable="true" scrollHeight="210px" 
                                    scrollWidth="100%" 
                                    emptyMessage="Lista vacia"> 
                            <p-column field="nro" header="N°"  [style]="{'width':'3em','text-align':'center'}"></p-column>
                            <p-column field="HoraBase" header="Hora Base" [editable]="true" [style]="{'width':'6em','text-align':'center'}" ></p-column>
                        </p-dataTable>

                    </div>

                
                    <div class="pieFormHoraBase">
                        <div class="row justify-content-end">
                            <div class="col-xl-3 col-md-4 col-sm-12 col-xs-12 ">
                                <!--
                                    [hidden]="!(nroMiniBus==nroTotalMinibuses)"
                                    (click)="generarProgramacionDetalle(); hBase.reset(); hIncremento.reset();" 
                                -->
                                <button class="btn_modal" type="text" pButton icon="fa-step-forward" 
                                (click)="funcFormTwoNextProgBaseHb();" 
                                
                                label="Next"></button>
                            </div>     

                            <div class="col-xl-3 col-md-4 col-sm-12 col-xs-12 ">
                                <!--[hidden]="nroMiniBus==nroTotalMinibuses"-->
                                <button class="btn_modal" type="text" pButton icon="fa-close" 
                                (click)="funcFormTwoCancelProgBaseHb();" 
                                
                                label="Cancel"></button>
                            </div>
                            
                        </div>
                    </div>

                </div>
            </p-dialog>
        
        <!--3ero formulario
            crear todos los registros diarios de toda la programacion
            apertura todos los registro diario / ORDEN DE SUBEMPRESA BASE-->
        <p-dialog header="Apertura Registros Diarios" [(visible)]="displayOrdSubEmpBaseRegDiario" 
                modal="modal" width="100%" height="100%" 
                responsive="true" [resizable]="false" [closable]="false">
        
            <div class="contFormMRegDiaOrdSubEmp">
                <div class="bodyFormMRegDiaOrdSubEmp">
                    
                        <div class="row justify-content-between">
                            <div class="col-xl-7 col-md-6 col-sm-12 col-xs-12">
                                <div class="form-group">
                                        <label>Fechas:</label>  
                                    <select class="form-control" (change)="funcCboFechProg($event)">
                                        <option *ngFor="let SubEmp of arrAllSubEmp">{{SubEmp.fecha}} - {{SubEmp.Estado}}</option>
                                    </select>
                                </div>
                            </div>
                        
                            <div class="col-xl-4 col-md-4 col-sm-12 col-xs-12">
                                <br>
                                <button class="btn_modal" type="text" pButton icon="fa-check" 
                                (click)="aceptarOrderSubEmp();" label="Aceptar" [disabled]="!disBtnSaveAllSuEm"
                                ></button>
                            </div>
                            
                        </div>
                        <!--(onRowSelect)="onRowSelArrOrderSubEmp($event)" 
                            (onRowUnselect)="onRowUnSelArrOrderSubEmp($event)"-->
                        <p-dataTable [value]="arrAllSubEmpByDays" scrollable="true" 
                            (onEditComplete)="onEditCompleteFieldOrderSubEmp($event)"
                            (onEditCancel)="onEditCancelFieldOrderSubEmp($event)"
                            (onEditInit)="onEditInitFieldOrderSubEmp($event)"
                            [editable]="true" scrollHeight="360px" scrollWidth="100%" 
                            emptyMessage="Lista Vacia" [(selection)]="selectedArrAllSubEmpByDays">
                            <!--
                            <p-column field="Nro" header="N°"  [style]="{'width':'2em','text-align':'center'}"></p-column>
                            <p-column selectionMode="multiple" [style]="{'width':'2em'}"></p-column>
                            -->
                            <p-column field="SuEmRSocial" header="Empresa"  [style]="{'width':'6em'}"></p-column>                    
                            <p-column field="SuEmSorteo" [editable]="true" header="Sorteo"  [style]="{'width':'2em','text-align':'center'}"></p-column>    
                        </p-dataTable>
                    
                </div>

                <div class="pieFormMRegDiaOrdSubEmp">
                    <div class="row justify-content-end">
                        <div class="col-xl-4 col-md-4 col-sm-6 col-xs-12">
                            <!--[disabled]="!disBtnSaveAllSuEm"-->
                            <button class="btn_modal" type="text" pButton icon="fa-check" 
                            (click)="funcBtnOkOrderSubEmpAperRegDiario();" label="Aceptar" 
                            ></button>
                        </div>
                        <div class="col-xl-4 col-md-4 col-sm-6 col-xs-12">
                            <button class="btn_modal" type="text" pButton icon="fa-check" 
                            (click)="funcBtnCancelOrderSubEmpAperRegDiario();" label="Cancelar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>


    <!--NUEVA PROGRAMACION, 
            1ERA VENTANA - CREAR PROGRAMACION
            esta parte es despues de crear la programacion base
        -->
            <p-dialog  [(visible)]="displayNuevaSubProg" modal="modal" width="100%" height="100%" 
                        responsive="true" [resizable]="false" [closable]="false">
                
                <p-header> Nueva programacion </p-header>
    
                <div class="contFormNewProgInitUno">
                    <div class="bodyFormNewProgInitUno">                                           
                    
                        <div class="row">
                            <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                                <!--todas las subempresas-->
                                <div class="form-group" [hidden]='CoSiId==2'>
                                    <label >Buses:</label>
                                    <div class="control-label">
                                        <label>{{resBusUnidades}}</label>
                                        <label [hidden]="bAct>0 && bAct!=0"></label>
                                    </div>
                                </div>

                                <!--combo de subempresas-->
                                <div class="form-group" [hidden]='CoSiId==1'>
                                    <label  class="control-label" >Sub-Empresas: {{resBusUnidades}}</label>
                                    <select class="form-control" [(ngModel)]="SuEmId" (change)="funcCboAllBusBySuEmId()" required #cboSubEmp="ngModel" >
                                        <option *ngFor="let SuEm of arrSubEmp" [ngValue]="SuEm.SuEmId">
                                            {{SuEm.SuEmRSocial}}
                                        </option>
                                    </select>
                                    <div id="validation" [hidden]="!cboSubEmp.touched || cboSubEmp.valid "> Error, revise los datos</div>
                                    <div id="validation" [hidden]="!valSuEmIdCreateProg">{{mnjValSuEmIdCreateProg}}</div>
                                </div>
                            </div>
                        
                            <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            
                                <div class="form-group">
                                    <label  class="control-label">Tipo Sorteo:</label>
                                    <select class="form-control" [(ngModel)]="tipoProg" (change)="fcboTipoProg()" required #tprog="ngModel">
                                        <option *ngFor="let tipo of _tipoProg" [ngValue]="tipo.id">{{tipo.nTipo}}</option>
                                    </select>
                                    <div id="validation" [hidden]="!tprog.touched || tprog.valid ">
                                            Error, revise los datos ingresados
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="form-group">
                                    <label  class="control-label" >Forma Programacion:</label>
                                    <select class="form-control" [(ngModel)]="formaProg" (change)="formaProgramacion()" required #fprog="ngModel" >
                                        <option *ngFor="let forma of _formaProg" [ngValue]="forma.id">{{forma.nForma}}</option>
                                    </select>
                                    <div id="validation" [hidden]="!fprog.touched || fprog.valid ">
                                            Error, revise los datos ingresados
                                    </div>
                                </div>
                            </div>
                        </div>
                                                        
                    </div>
                        
                    <!--BOTONES-->
                    <div class="pieFormNewProgInitUno">
                        <div class="row justify-content-end">
                            <div class="col-xl-6 col-md-6 col-sm-6 col-xs-12">
                                <button class="btn_modal" type="text" pButton icon="fa-check" 
                                (click)="guardarProgCabecera();" 
                                label="Continuar" 
                                [disabled]=" "></button>
                                <!--!(bAct>0 && bAct!=0) || !tprog.valid || !fprog.valid || !fde.valid || !fha.valid || !descrip.valid || !(dtSelectDias.length>4 && dtSelectDias.length<8)-->
                            </div>
                            <div class="col-xl-6 col-md-6 col-sm-6 col-xs-12">
                                <!-- tprog.reset(); fprog.reset(); fde.reset(); fha.reset(); descrip.reset();
                                cancelNuevaSubProg
                                -->
                                <button class="btn_modal" type="text" pButton icon="fa-close" 
                                (click)="cancelNuevaSubProg();" label="Cancelar"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </p-dialog> 
        
        <!--
            2DA VENTANA - SORTEO DE PLACAS
            2DA VENTANA modal del boton guardar (2DA VENTANA  TERMINAR GENERANDO LA PROGRAMACION) 
        -->
            <p-dialog [resizable]="false" [(visible)]="displaySorteoProg" modal="modal" 
                        width="100%" responsive="true" [closable]="false" >            
                <div class="contFormNewProgSorteoDos">
                    <div class="bodyFormNewProgSorteoDos">             
                        <div class="row justify-content-center">
                            <label>Sorteo Programacion Placas</label>
                            <br>
                            <p-pickList [source]="arrayPlacas" 
                                        [target]="ordenSorteo" 
                                        sourceHeader="Placa" 
                                        targetHeader="Orden" [responsive]="false" 
                                        [sourceStyle]="{'height':'220px','width':'100px'}"  
                                        [targetStyle]="{'height':'220px','width':'100px'}">
                                <template let-placa pTemplate="item">
                                    <div class="ui-helper-clearfix">
                                        <!--<div style="display:inline-block; margin:5px 2px 2px 2px" >
                                            {{placa.nro}}
                                        </div>-->
                                        <div style="font-size:16px; float:right; margin:5px 5px 0 0">
                                            {{placa.BuPlaca}}
                                        </div>
                                    </div>
                                </template>
                            </p-pickList>                                                                                 
                        </div>                   
                    </div>
                                
                    <!--BOTONES DE LA VENTANA-->      
                    <div class="pieFormNewProgSorteoDos">     
                        <div class="row justify-content-end">
                            <div class="col-xl-6 col-md-6 col-sm-12 col-xs-12">
                                <button class="btn_modal"  pButton icon="fa-check" (click)="programacionSegundoModal()" 
                                label="Terminar"></button>
                            </div>
                            <div class="col-xl-6 col-md-6 col-sm-12 col-xs-12">
                                <button class="btn_modal"  pButton icon="fa-close" (click)="cancelarProgBaseSegundoModal()" 
                                [disabled]="disabledButtonForm()" label="Cancelar"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </p-dialog> 

    

    <!--EDITAR PROGRAMACION CABECERA-->
        <p-dialog header="Editar Nombre" [(visible)]="displayEditProgC" [resizable]="false" modal="modal"
                   width="100%" height="100%" responsive="true" [closable]="false">
            <div class="contFormEditNombProg">
                <div class="bodyFormEditNombProg">
                    <div class="form-group">
                        <label class="control-label">Nombre:</label>
                        <input class="form-control" type="text" [(ngModel)]="progDescripcion" maxlength="30" #descrip="ngModel" required />
                    
                        <span *ngIf="!descrip.valid && descrip.touched" >
                            <div id="validation" [hidden]="!descrip.errors.required"> Obligatorio </div>
                        </span>
                    </div>
                </div>
                <div class="pieFormEditNombProg">
                    <div class="row justify-content-center">
                        <div class="col-xl-6 col-md-6 col-sm-6 col-xm-12">
                            <button class="btn_modal"  pButton icon="fa-save" (click)="EditarProgCabecera()" 
                                    label="Guardar"></button>
                        </div>
                        <div class="col-xl-6 col-md-6 col-sm-6 col-xm-12">
                            <button class="btn_modal"  pButton icon="fa-close" (click)="canEditarProgC()"   
                                    label="Cancelar"></button>
                        </div>
                    </div>
                </div>
            </div>
            
        </p-dialog>
        

    <!--TABLA PROGRAMACION-->
    <!--MODAL VISTA PROGRAMACIONES (CLICK SOBRE UN REGISTRO)-->
        <p-dialog [(visible)]="displayProgramacion" modal="modal" width="100%" [closable]="false" [resizable]="false" *ngIf="nroColumn>=5">
            <p-header>Programacion</p-header>

            <div class="contFMPreview">
                <div class="bodyFMPreview">
                   
                                <table *ngIf="60>nroColumn && nroColumn>=50" id="progTPlacas7">   
                                    <thead><tr><th *ngFor="let diaNRO of calNumb;">{{diaNRO}}</th></tr></thead>
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table *ngIf="50>nroColumn && nroColumn>=40" id="progTPlacas6">   
                                    <thead><tr><th *ngFor="let diaNRO of calNumb;">{{diaNRO}}</th></tr></thead>
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table *ngIf="40>nroColumn && nroColumn>=30" id="progTPlacas1">   
                                    <thead><tr><th *ngFor="let diaNRO of calNumb;">{{diaNRO}}</th></tr></thead>
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table *ngIf="30>nroColumn && nroColumn>=20" id="progTPlacas2">   
                                    <thead><tr><th *ngFor="let dia of calNumb;">{{dia}}</th></tr></thead>
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>
                                    <tbody>
                                        <tr *ngFor="let c of _detalle"><td *ngFor="let placa of c">{{placa}}</td></tr>
                                    </tbody>
                                </table>
                                <table *ngIf="20>nroColumn && nroColumn>10" id="progTPlacas3">
                                    <thead><tr><th *ngFor="let dia of calNumb;">{{dia}}</th></tr> </thead>
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table *ngIf="10>=nroColumn && nroColumn>5" id="progTPlacas4">
                                    <thead><tr><th *ngFor="let dia of calNumb;">{{dia}}</th></tr></thead>
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table *ngIf="5>=nroColumn && nroColumn>0" id="progTPlacas5">
                                    <thead><tr><th *ngFor="let dia of calNumb;">{{dia}}</th></tr></thead>   
                                    <thead><tr><th *ngFor="let diaNRO of calString;">{{diaNRO}}</th></tr></thead>                               
                                    <tbody>
                                        <tr *ngFor="let c of _detalle">
                                            <td *ngFor="let placa of c">{{placa}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                       
                </div>
             
                <div class="pieFMPreview">
                    <div class=" row justify-content-end">
                        <div class="col-xl-2 col-md-3 col-sm-4 col-xs-12">
                            <button class="btn_modal"  icon="fa-download" pButton (click)="generarArchivo()" label="Bajar Archivo"></button>
                        </div>
                        <div class="col-xl-2 col-md-3 col-sm-4 col-xs-12">
                            <button class="btn_modal"  icon="fa-close" pButton (click)="cerrarProg()"   label="Cerrar"></button>
                        </div>  
                    </div>
                </div>     
            </div> 
        </p-dialog>


<!--VENTANAS DE CONFIRMACION-->
        <!--MODAL CONFIRMAR EDITAR REGISTRO-->
        

        <!--MODAL CONFIRMAR ELIMINAR REGISTRO-->
        <p-dialog [(visible)]="displayConfDelProgBase" [resizable]="false" modal="modal" 
                    width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">    
                <div class="bodyMMjsUser">    
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-6 col-md-6 col-sm-6 col-xm-12">
                            <button class="btn_modal"  pButton (click)="borrarRegProgBase()" label="Aceptar"></button>
                        </div>
                        <div class="col-xl-6 col-md-6 col-sm-6 col-xm-12">
                            <button class="btn_modal"  pButton (click)="displayConfDelProgBase=false"   label="Cancelar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <p-dialog [(visible)]="displayConfDelProgram" [resizable]="false" modal="modal" 
                    width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">    
                <div class="bodyMMjsUser">    
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-6 col-md-6 col-sm-6 col-xm-12">
                            <button class="btn_modal"  pButton (click)="borrarRegProgBase()" label="Aceptar"></button>
                        </div>
                        <div class="col-xl-6 col-md-6 col-sm-6 col-xm-12">
                            <button class="btn_modal"  pButton (click)="displayConfDelProgBase=false"   label="Cancelar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--MODAL ACEPTAR NUEVA PROGRAMACION (CONFIRMAR)-->
        <p-dialog [(visible)]="displayAceptarProgNueva" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <div *ngIf="nroTotalMinibuses==nroMiniBus">
                        <p>{{mensajeEspera}}</p>
                    </div>
                    
                    <div *ngIf="lengthProgDet!=0">
                            <p>{{mensajeProcesando}}</p>
                    </div>

                    <div *ngIf="nroMiniBus==0 && nroTotalMinibuses==-1">
                        <p>{{mensaje}}</p>
                    </div>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button [hidden]="nroMiniBus!=0 && nroTotalMinibuses!=-1" class="btn_modal"  pButton (click)="aceptarNuevaProg()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--ERROR AL INGRESAR DATOS 1ERA VENTANA MODAL-->
        <p-dialog [(visible)]="displayErrorDatos" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser" style="margin-top:40px;">             
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="errorDatos()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--ERROR EN LA TABLA DE PROGRAMACION, VENTANA MODAL-->
        <p-dialog [(visible)]="displayErrorTablaProgramacion" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser">             
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="errorTablaProgramacion()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--ERROR FALTAN PLACAS EN EL SORTEO, VENTANA MODAL-->
        <p-dialog [(visible)]="displayFaltanPlacas" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="faltanPlacas()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>    
        </p-dialog>

        <!--MENSAJE SE ACABA DE DESCARGAR LA PROGRAMACION, VENTANA MODAL-->
        <p-dialog [(visible)]="displayDescargaProg" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="descargaProg()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--ERROR  MENSAJE NO SE PUEDE BORRAR LA PROGRAMACION-->
        <p-dialog [(visible)]="displayAvisoNoPuedeBorrarProg" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="OkProgNoPuedoBorrar()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

         <!--ERROR  NO SE PUEDE DESCARGAR LAS PLACAS DE LA BD-->
         <p-dialog [(visible)]="displayErrorCargarPlacas" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="aceptarErrorPlacas()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--SE GENERO CORRECTAMENTE LA PROGRAMACION-->
        <p-dialog [(visible)]="displayTerminoTodoGenerarProg" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser">         
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="aceptarGenProgComplet()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

         <!--ERROR ENTRE FECHAS IGNRESADAS EN EL PRIMER FORMULARIO CREAR PROGRAMACION-->
         <p-dialog [(visible)]="displayErrorFechIngrFormUno" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <div class="bodyMMjsUser">
                    <p>{{mensaje}}</p>
                </div>
                <div class="pieMMjsUser"> 
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <button class="btn_modal"  pButton (click)="aceptarErrorFechasValidas()" label="Aceptar"></button>
                        </div>
                    </div>
                </div>
            </div>
        </p-dialog>

        <!--MENSAJE DE ESPERA-->
        <p-dialog [(visible)]="displayMensajeEspera" [resizable]="false" modal="modal" width="100%" responsive="true" [closable]="false">
            <div class="conMMjsUser">
                <p>{{mensajeEspera}}</p>
            </div>
        </p-dialog>


<!---->




